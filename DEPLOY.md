# Deployment to Vercel

## Quick Deploy

```bash
npm i -g vercel
vercel
```

Follow prompts, confirm defaults. **Done in ~30 seconds.**

---

## Manual Deployment

### Via Git Push

1. Create GitHub repo
   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   git remote add origin https://github.com/YOUR_USERNAME/symphony-quiz.git
   git push -u origin main
   ```

2. Connect to Vercel via dashboard
   - Import project from GitHub
   - Select framework: **Next.js**
   - Deploy

### Via Vercel CLI

```bash
vercel --prod
```

---

## Post-Deploy

### Set Environment Variables (if using realtime)

Vercel Dashboard → Settings → Environment Variables

```
NEXT_PUBLIC_REALTIME = vercel
```

Or for Pusher:

```
NEXT_PUBLIC_REALTIME = pusher
NEXT_PUBLIC_PUSHER_KEY = ...
NEXT_PUBLIC_PUSHER_CLUSTER = ...
PUSHER_SECRET = ...
```

### Verify Deployment

- Visit `https://your-project.vercel.app`
- Open DevTools → Lighthouse → Run audit
- Test on mobile (use Chrome DevTools emulation)

---

## Performance Metrics

- **First Contentful Paint (FCP)**: < 1.2s
- **Largest Contentful Paint (LCP)**: < 2.5s
- **Cumulative Layout Shift (CLS)**: < 0.1
- **Cold Start**: < 500ms

Vercel + Next.js 16 delivers these by default.

---

## Custom Domain

Vercel Dashboard → Domains → Add Custom Domain

Example: `quiz.symphony.com`

SSL certificate auto-generated by Vercel.

---

## Monitoring

### Vercel Analytics

Enable in Vercel Dashboard → Settings → Analytics

Track:
- Page performance
- Function durations
- Error rates

### LogRocket / Sentry (Optional)

Add error tracking:

```bash
npm install @sentry/nextjs
```

Configure in `next.config.mjs`:

```javascript
import * as Sentry from '@sentry/nextjs';

Sentry.init({
  dsn: process.env.NEXT_PUBLIC_SENTRY_DSN,
  tracesSampleRate: 1.0,
});

export default nextConfig;
```

---

## Troubleshooting

### "Module not found" on Vercel

Ensure all imports use correct paths:
- `@/components/...` (alias)
- No relative `../../../` paths

### Styles not loading

- Clear Vercel cache: Dashboard → Settings → Git → Purge Cache & Redeploy
- Check `tailwind.config.ts` includes all files:
  ```typescript
  content: ['./src/**/*.{js,ts,jsx,tsx,mdx}']
  ```

### Realtime not working

1. Verify env vars set in Vercel Dashboard
2. Check logs: Vercel Dashboard → Deployments → Logs
3. Fallback: Set `NEXT_PUBLIC_REALTIME` to empty (use Team Mode)

---

## Rollback

Vercel Dashboard → Deployments → Previous version → Promote to Production

---

## Custom 404 Page

Already handled by Next.js at `/app/_not-found.tsx`. Customize if needed.

---

## Static Exports

If you prefer **static export** (no serverless functions):

```bash
# next.config.mjs
export const output = 'export';
```

Then deploy to Netlify, CloudFlare Pages, S3 + CloudFront, etc.

**Note**: Realtime won't work with static exports; use Team Mode only.

---

## Questions?

- **Vercel Docs**: https://vercel.com/docs/frameworks/nextjs
- **Next.js Docs**: https://nextjs.org/docs
- **Support**: Vercel Dashboard → Help
